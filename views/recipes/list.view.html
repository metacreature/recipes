<?php
/*
 File: list.view.html
 Copyright (c) 2025 Clemens K. (https://github.com/metacreature)
 
 MIT License
 
 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:
 
 The above copyright notice and this permission notice shall be included in all
 copies or substantial portions of the Software.
 
 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.
*/
?>
<?php require_once (DOCUMENT_ROOT . '/views/includes/header.view.html'); ?>
<?php require_once (DOCUMENT_ROOT . '/views/includes/navigation.view.html'); ?>

<div id="recipe_list_filter">
    <?php 
    
    $class = $form->printInput('user_ids') ? ' count5' : ' count4';

    echo $form->printStartTag(false);
    echo '<div class="filter_input_wrapper'. $class .'">';
    echo '  <div class="field_wrapper">' . $form->printInput('user_ids') . '</div>';
    echo '  <div class="field_wrapper">' . $form->printInput('category_id') . '</div>';
    echo '  <div class="field_wrapper">' . $form->printInput('tag_id') . '</div>';
    echo '  <div class="clear medium_visible"></div>';
    echo '  <div class="field_wrapper">' . $form->printInput('ingredients_id') . '</div>';
    echo '  <div class="field_wrapper">' . $form->printInput('recipe_name') . '</div>';
    echo '  <div class="clear"></div>';
    echo '</div>';
    echo '<div class="filter_button_wrapper">';
    echo    $form->printSubmit('<img src="/static/images/icons/search-sharp.svg"  alt="">', 'search', '/recipes/list/list');
    echo '  <a href="#" class="btn sort"><span><img src="/static/images/icons/swap-vertical-sharp.svg" alt=""></span></a>';
    echo '  <div id="sort_popup">';
    echo '      <a href="">' . LANG_RECIPE_LIST_SORT_NAME . '</a>';
    echo '      <a href="1">' . LANG_RECIPE_LIST_SORT_COSTS . ' ˄</a>';
    echo '      <a href="2">' . LANG_RECIPE_LIST_SORT_COSTS . ' ˅</a>';
    echo '      <a href="3">' . LANG_RECIPE_LIST_SORT_DURATION . ' ˄</a>';
    echo '      <a href="4">' . LANG_RECIPE_LIST_SORT_DURATION . ' ˅</a>';
    echo '      <a href="5">' . LANG_RECIPE_LIST_SORT_TOTAL_DURATION . ' ˄</a>';
    echo '      <a href="6">' . LANG_RECIPE_LIST_SORT_TOTAL_DURATION . ' ˅</a>';
    echo '  </div>';
    echo '  <div class="clear"></div>';
    echo '</div>';
    echo '<div class="clear"></div>';
    echo $form->printEndTag();
    ?>
</div>

<div id="recipe_list">
    <a class="entry add_recipe" href="/recipes/editor">
        <img src="/static/images/icons/add-circle-outline.svg" alt="">
        <span><?php echo LANG_RECIPE_LIST_ADD; ?></span>
    </a>

</div>

<script>

    var recipe_list = <?php echo json_encode($recipe_list); ?>

    $('select[name="user_ids[]"]').select2({
        placeholder: "<?php echo LANG_RECIPE_LIST_FILTER_USER; ?>",
        allowClear: true,
        width: '100%'
    });
    $('select[name="category_id[]"]').select2({
        placeholder: "<?php echo LANG_RECIPE_LIST_FILTER_CATEGORY; ?>",
        allowClear: true,
        width: '100%'
    });
    $('select[name="tag_id[]"]').select2({
        placeholder: "<?php echo LANG_RECIPE_LIST_FILTER_TAG; ?>",
        allowClear: true,
        width: '100%'
    });
    $('select[name="ingredients_id[]"]').select2({
        placeholder: "<?php echo LANG_RECIPE_LIST_FILTER_INGREDIENTS; ?>",
        allowClear: true,
        width: '100%'
    });
    $('input[name="recipe_name"]').attr('placeholder', "<?php echo LANG_RECIPE_LIST_FILTER_NAME; ?>");

    var LANG_RECIPE_LIST_DETAIL_INGREDINTS_ALTERNATIVE = "<?php echo LANG_RECIPE_LIST_DETAIL_INGREDINTS_ALTERNATIVE; ?>";
    var LANG_RECIPE_LIST_DELETE_CONFIRM_TITLE = "<?php echo LANG_RECIPE_LIST_DELETE_CONFIRM_TITLE; ?>";
    var LANG_RECIPE_LIST_DELETE_CONFIRM_TEXT = "<?php echo LANG_RECIPE_LIST_DELETE_CONFIRM_TEXT; ?>";
    var LANG_RECIPE_LIST_DELETE_CONFIRM_CONFIRM = "<?php echo LANG_RECIPE_LIST_DELETE_CONFIRM_CONFIRM; ?>";
    var LANG_RECIPE_LIST_DELETE_CONFIRM_CANCEL = "<?php echo LANG_RECIPE_LIST_DELETE_CONFIRM_CANCEL; ?>";
    var LANG_RECIPE_LIST_DETAIL_DURATION_UNIT = "<?php echo LANG_RECIPE_LIST_DETAIL_DURATION_UNIT; ?>";
    var LANG_RECIPE_LIST_DETAIL_COSTS = "<?php echo LANG_RECIPE_LIST_DETAIL_COSTS; ?>";
    var LANG_RECIPE_LIST_DETAIL_DURATION = "<?php echo LANG_RECIPE_LIST_DETAIL_DURATION; ?>";
    var SETTINGS_CURRENCY = "<?php echo SETTINGS_CURRENCY; ?>";

</script>

<script src='/static/js/recipe_list.js?v=2'></script>

<?php require_once (DOCUMENT_ROOT . '/views/includes/footer.view.html'); ?>
